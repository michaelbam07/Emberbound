[gd_scene load_steps=10 format=3 uid="uid://main_scene"]

[node name="Main" type="Node"]
script = ExtResource("1")  # Main.gd or GameManager.gd

# =====================
# Core Managers (Autoload alternatives â€” instanced here for clarity)
# =====================
[node name="GameManager" type="Node" parent="."]
script = ExtResource("2")  # GameManager.gd

[node name="GachaManager" type="Node" parent="."]
script = ExtResource("3")  # GachaManager.gd

[node name="PlayerData" type="Node" parent="."]
script = ExtResource("4")  # PlayerData.gd

[node name="UIManager" type="Node" parent="."]
script = ExtResource("5")  # UIManager.gd

[node name="AudioManager" type="Node" parent="."]
script = ExtResource("6")  # AudioManager.gd

[node name="BannerManager" type="Node" parent="."]
script = ExtResource("7")  # BannerManager.gd

[node name="SaveManager" type="Node" parent="."]
script = ExtResource("8")  # SaveManager.gd

# =====================
# UI Layer
# =====================
[node name="CanvasLayer" type="CanvasLayer" parent="."]
layer = 1

# Dim overlay for modals
[node name="DimBackground" type="ColorRect" parent="CanvasLayer"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
color = Color(0, 0, 0, 0.6)
visible = false

# Popup system
[node name="PopupLayer" type="CanvasLayer" parent="CanvasLayer"]
layer = 10

[node name="PopupManager" parent="CanvasLayer/PopupLayer" instance=ExtResource("9")]  # PopupManager.tscn

# =====================
# Major UI Screens (Instanced & Hidden)
# =====================
[node name="GachaUI" parent="CanvasLayer" instance=ExtResource("10")]
visible = false

[node name="InventoryUI" parent="CanvasLayer" instance=ExtResource("11")]
visible = false

[node name="CampfireUI" parent="CanvasLayer" instance=ExtResource("12")]
visible = false

[node name="PullResultScreen" parent="CanvasLayer" instance=ExtResource("13")]
visible = false

[node name="ItemDetailPopup" parent="CanvasLayer" instance=ExtResource("14")]
visible = false

# Optional: Hub background or persistent HUD
[node name="HUD" type="CanvasLayer" parent="."]
layer = 2

[node name="GlobalHUD" type="Control" parent="HUD"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0

# Add currency labels, level, etc. here

# =====================
# Global AnimationPlayer (for screen transitions)
# =====================
[node name="GlobalAnimationPlayer" type="AnimationPlayer" parent="."]